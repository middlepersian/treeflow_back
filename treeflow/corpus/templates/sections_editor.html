{% extends "base.html" %}
{% load static tailwind_tags %}


{% block content %}
<!-- Section Edit -->
<button id="startTokenSelection" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
    data-mode="select">
    Start Token Selection
</button>

<div class="container flex flex-row">
    <!-- Sidebar with Chapter Information -->
    <div class="sidebar w-1/4 bg-gray-100 p-4">
        <h2 class="font-bold text-lg mb-4">Select Section Type</h2>
        <!-- Dropdown Menu for selecting section type -->
        <select id="sectionTypeSelector" class="mb-4">
            {% for section_type in section_types %}
            <option value="{{ section_type }}">{{ section_type|title }}</option>
            {% endfor %}
        </select>
        <!-- Section List Placeholder -->
        <div id="sectionList">
            <!-- Sections will be dynamically loaded here -->
        </div>
    </div>

    <!-- Content Area for sentences -->
    <div class="content w-3/4 p-4">
        <!-- Loop over sections of type 'sentence' -->
        {% for section in sentence_sections %}
        <!-- Sentence Block starts -->
        <div class="sentence mb-2 flex items-center p-2 bg-white shadow rounded">
            <!-- Display sentence section title or identifier with a fixed width -->
            <div class="sentence-identifier w-1/8 font-bold mr-1">
                {{ section.number|default:"Untitled" }}
            </div>
            <!-- Sentence content tokens displayed next to the identifier -->
            <div class="sentence-content w-2/8 flex flex-wrap">
                {% for token in section.prefetched_tokens %}
                <!-- Add data-section-id attribute to each token -->
                <span class="token inline-block rounded px-1 py-0.5 m-0.5" data-token-id="{{ token.id }}"
                    data-section-id="{{ section.id }}"> <!-- Add this line -->
                    {{ token.transcription }}
                </span>
                {% endfor %}
            </div>

        </div>
        {% empty %}
        <p>No sentence sections found for this text.</p>
        {% endfor %}
    </div>

    <input type="hidden" id="id_selected_tokens" name="selected_tokens" value="">

    <!-- Scroll to Top -->
    <div class="fixed bottom-5 right-5 hidden scroll-to-top">
        <button class="bg-blue-500 text-white font-bold py-2 px-4 rounded" onclick="scrollToTop()">â†‘</button>
    </div>


    <div id="modalContainer"></div>

</div>

<script>
    var textId = '{{ text_id }}';
</script>



<script src="{% static 'corpus/section_navigator.js'%}"></script>
<script src="{% static 'corpus/section_creator.js'%}"></script>

{% endblock content %}
