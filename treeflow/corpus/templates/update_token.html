{% extends "base.html" %}
{% block content %}

<div class="container mx-auto px-4 py-2">
  <h1 class="text-2xl font-semibold mb-6">Edit Token</h1>

  {% if form.errors %}
  <div class="bg-red-500 text-white font-bold rounded-t px-4 py-2">
    There was a problem with your submission.
  </div>
  <div class="border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700">
    <ul>
      {% for field in form %}
      {% for error in field.errors %}
      <li><strong>{{ field.label }}:</strong> {{ error }}</li>
      {% endfor %}
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <form method="post" action="{% url 'corpus:update_token' %}" class="w-full max-w-lg">
    {% csrf_token %}

    {% for field in form %}
    <div class="mb-4">
      <label for="{{ field.id_for_label }}" class="block text-gray-700 text-sm font-bold mb-2">
        {{ field.label }}
      </label>
      <!-- Here you need to manually construct the form field element -->
      <input type="text" name="{{ field.name }}" id="{{ field.id_for_label }}"
        value="{{ field.value|default_if_none:"" }}"
        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" />
      {% if field.help_text %}
      <p class="text-gray-600 text-xs italic">{{ field.help_text }}</p>
      {% endif %}
      {% if field.errors %}
      {% for error in field.errors %}
      <p class="text-red-500 text-xs italic">{{ error }}</p>
      {% endfor %}
      {% endif %}
    </div>
    {% endfor %}


    {% if token_id %}
    <input type="hidden" name="token_id" value="{{ token_id }}">
    {% endif %}

    <button type="submit"
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
      Save changes
    </button>
  </form>

  <a href="{% url 'corpus:tokens' %}" class="text-blue-700 hover:underline mt-4 inline-block">Back to token list</a>
</div>

{% endblock content %}